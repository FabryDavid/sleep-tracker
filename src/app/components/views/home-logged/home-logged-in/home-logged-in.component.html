<div class="container main-top-margin">
  <h2 class="fw-bolder h1">Welcome</h2>

  <app-timer></app-timer>

  <div class="row mt-5 px-0 w-100">
    <div class="col-5">
      <app-add-time></app-add-time>
    </div>
    <div class="col-7">
      <app-sleep-times></app-sleep-times>
    </div>
  </div>

  <div class="my-5 d-flex justify-content-center">
    <mat-button-toggle-group (change)="timeFilterChange()" [(ngModel)]="timeFilter" name="filterType" class="">
      <mat-button-toggle class="toggle-button" [value]="TimeFilterEnum.last7days">Last 7 days</mat-button-toggle>
      <mat-button-toggle class="toggle-button" [value]="TimeFilterEnum.thisMonth">This month</mat-button-toggle>
      <mat-button-toggle class="toggle-button" [value]="TimeFilterEnum.thisYear">This year</mat-button-toggle>
    </mat-button-toggle-group>
  </div>

  <div class="mt-5 row align-items-center justify-content-center">
    <div class="col-4">
      <app-avg-sleep-panel [tips]="sleepTimes"></app-avg-sleep-panel>
    </div>
    <div class="col-4">
      <app-total-sleep-panel [tips]="sleepTimes"></app-total-sleep-panel>
    </div>
  </div>

  <div class="row mt-5 justify-content-between">
    <div class="col-5 sleep-times-list">
      <table mat-table [dataSource]="sleepTimes" class="w-100 times-table">
        <ng-container *ngFor="let column of columns" [matColumnDef]="column.columnDef">
          <th mat-header-cell *matHeaderCellDef>
            {{column.header}}
          </th>
          <td mat-cell *matCellDef="let row">
            {{column.cell(row)}}
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    </div>

    <div class="col-6 times-chart pe-5 ps-4 py-4">
      <div>
        <ngx-charts-line-chart
          [legend]="false"
          [scheme]="'fire'"
          [showXAxisLabel]="true"
          [showYAxisLabel]="true"
          [autoScale]="true"
          [xAxis]="true"
          [yAxis]="true"
          [xAxisLabel]="xAxisLabel"
          [yAxisLabel]="'Slept time'"
          [timeline]="false"
          [results]="chartValues"
          [yAxisTickFormatting]="formatAxis"
        >
          <ng-template #tooltipTemplate let-model="model">
            <div class="">
              {{model.value|durationFormat}}
            </div>
          </ng-template>
          <ng-template #seriesTooltipTemplate let-model="model">
            <div class="">
              {{model[0].value|durationFormat}}
            </div>
          </ng-template>
        </ngx-charts-line-chart>
      </div>
    </div>
  </div>
</div>
